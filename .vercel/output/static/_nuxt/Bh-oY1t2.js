import{aE as s,K as c,aF as d,J as l}from"./BPMBOJUR.js";const m=s(async r=>{let o,a;console.log("ğŸš€ Admin middleware called for:",r.path);const{user:i,checkAuth:n}=c();if(r.path==="/admin/login"){console.log("â­ï¸ Skipping middleware for login page");return}let e=i.value;if(e)console.log("âœ… User already authenticated from cookie:",e.email);else{console.log("ğŸ‘¤ No user in state, checking auth...");try{e=([o,a]=d(()=>n(!0)),o=await o,a(),o)}catch(t){return console.error("âŒ Auth check failed:",t),l("/admin/login")}}if(!e||!e.role||!["admin","super_admin","moderator"].includes(e.role))return console.log("âŒ No authenticated admin user found, redirecting to login"),l("/admin/login");console.log("âœ… User has admin privileges:",e.email,"role:",e.role),console.log("âœ… Middleware completed successfully for:",r.path)});export{m as default};
